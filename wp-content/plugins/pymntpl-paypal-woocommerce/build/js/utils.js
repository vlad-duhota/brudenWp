/*! For license information please see utils.js.LICENSE.txt */
(()=>{"use strict";var t={n:e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a=[],i=!0,c=!1;try{for(n=n.call(t);!(i=(r=n.next()).done)&&(a.push(r.value),!e||a.length!==e);i=!0);}catch(t){c=!0,o=t}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}}(t,e)||function(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}t.r(e),t.d(e,{SHIPPING_OPTION_REGEX:()=>O,convertCartAddressToPayPal:()=>q,convertPayPalAddressToCart:()=>D,extractFullName:()=>L,extractShippingMethod:()=>H,fieldsToJson:()=>I,getErrorMessage:()=>x,getFieldValue:()=>C,getPage:()=>V,getPayPalQueryParams:()=>k,getRestPath:()=>U,getRestRoute:()=>G,getSetting:()=>_,isPluginConnected:()=>B,isValidAddress:()=>R,isValidFieldValue:()=>N,loadPayPalSdk:()=>S,setFieldValue:()=>T,setSetting:()=>A,submitErrorMessage:()=>M});const a=window.lodash,i=window.jQuery;var c=t.n(i);const l=window.wp.hooks;function u(t,e){void 0===e&&(e={});var n=document.createElement("script");return n.src=t,Object.keys(e).forEach((function(t){n.setAttribute(t,e[t]),"data-csp-nonce"===t&&n.setAttribute("nonce",e["data-csp-nonce"])})),n}function s(t,e){if(void 0===e&&(e=d()),p(t,e),"undefined"==typeof window)return e.resolve(null);var n=function(t){var e="https://www.paypal.com/sdk/js";t.sdkBaseURL&&(e=t.sdkBaseURL,delete t.sdkBaseURL),function(t){var e=t["merchant-id"],n=t["data-merchant-id"],r="",o="";Array.isArray(e)?e.length>1?(r="*",o=e.toString()):r=e.toString():"string"==typeof e&&e.length>0?r=e:"string"==typeof n&&n.length>0&&(r="*",o=n),t["merchant-id"]=r,t["data-merchant-id"]=o}(t);var n,r,o=Object.keys(t).filter((function(e){return void 0!==t[e]&&null!==t[e]&&""!==t[e]})).reduce((function(e,n){var r=t[n].toString();return"data-"===n.substring(0,5)?e.dataAttributes[n]=r:e.queryParams[n]=r,e}),{queryParams:{},dataAttributes:{}}),a=o.queryParams,i=o.dataAttributes;return{url:"".concat(e,"?").concat((n=a,r="",Object.keys(n).forEach((function(t){0!==r.length&&(r+="&"),r+=t+"="+n[t]})),r)),dataAttributes:i}}(t),r=n.url,o=n.dataAttributes,a=o["data-namespace"]||"paypal",i=f(a);return function(t,e){var n=document.querySelector('script[src="'.concat(t,'"]'));if(null===n)return null;var r=u(t,e),o=n.cloneNode();if(delete o.dataset.uidAuto,Object.keys(o.dataset).length!==Object.keys(r.dataset).length)return null;var a=!0;return Object.keys(o.dataset).forEach((function(t){o.dataset[t]!==r.dataset[t]&&(a=!1)})),a?n:null}(r,o)&&i?e.resolve(i):function(t,e){void 0===e&&(e=d()),p(t,e);var n=t.url,r=t.attributes;if("string"!=typeof n||0===n.length)throw new Error("Invalid url.");if(void 0!==r&&"object"!=typeof r)throw new Error("Expected attributes to be an object.");return new e((function(t,e){if("undefined"==typeof window)return t();!function(t){var e=t.onSuccess,n=t.onError,r=u(t.url,t.attributes);r.onerror=n,r.onload=e,document.head.insertBefore(r,document.head.firstElementChild)}({url:n,attributes:r,onSuccess:function(){return t()},onError:function(){var t=new Error('The script "'.concat(n,'" failed to load.'));return window.fetch?fetch(n).then((function(n){return 200===n.status&&e(t),n.text()})).then((function(t){var n=function(t){var e=t.split("/* Original Error:")[1];return e?e.replace(/\n/g,"").replace("*/","").trim():t}(t);e(new Error(n))})).catch((function(t){e(t)})):e(t)}})}))}({url:r,attributes:o},e).then((function(){var t=f(a);if(t)return t;throw new Error("The window.".concat(a," global variable is not available."))}))}function d(){if("undefined"==typeof Promise)throw new Error("Promise is undefined. To resolve the issue, use a Promise polyfill.");return Promise}function f(t){return window[t]}function p(t,e){if("object"!=typeof t||null===t)throw new Error("Expected an options object.");if(void 0!==e&&"function"!=typeof e)throw new Error("Expected PromisePonyfill to be a function.")}function v(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){c=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var m={},w=!1,b=new Map,P=null,O=/^([\w]+)\:(.+)$/,j={address_1:"address_line_1|line1",address_2:"address_line_2|line2",state:"admin_area_1|state",city:"admin_area_2|city",postcode:"postal_code",country:"country_code"},E={city:"city",state:"state",postal_code:"postcode",country_code:"country"},S=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new Promise((function(e,n){!t||(0,a.isEmpty)(t)||(0,a.isEqual)(t,m)?window.paypal&&!w?e(window.paypal):(l.defaultHooks.addAction("paypalInstanceCreated","wcPPCP",(function(t){e(t)})),l.defaultHooks.addAction("paypalLoadError","wcPPCP",(function(){n()}))):(m=t,window.paypal&&l.defaultHooks.doAction("paypalInstanceCleanup",window.paypal),w=!0,s(h({},t)).then((function(t){e(t),l.defaultHooks.doAction("paypalInstanceCreated",t,m)})).catch((function(t){console.log(t),n(),l.defaultHooks.doAction("paypalInstanceCreated",paypal,m)})).finally((function(){w=!1})),l.defaultHooks.doAction("paypalLoadError"))}))},_=function(t){return void 0!==window.wcPPCPSettings&&window.wcPPCPSettings[t]||{}},A=function(t,e){if(void 0!==window.wcPPCPSettings)return window.wcPPCPSettings[t]=e},k=function(){return _("queryParams")},C=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"billing";return"shipping"!=t.substring(0,"shipping".length)&&"billing"!=t.substring(0,"billing".length)&&(t="".concat(e,"_").concat(t)),c()('[name="'.concat(t,'"]')).length?c()('[name="'.concat(t,'"]')).val():b.get(t)},I=function(){var t={};return b.forEach((function(e,n){t[n]=e})),t},T=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"billing";n&&"shipping"!=t.substring(0,"shipping".length)&&"billing"!=t.substring(0,"billing".length)&&(t="".concat(n,"_").concat(t)),b.set(t,e),c()('[name="'.concat(t,'"]')).length&&c()('[name="'.concat(t,'"]')).val(e)},x=function(t){var e=_("errorMessages");return"string"==typeof t?t:null!=t&&t.code&&null!=e&&e[t.code]?e[t.code]:null!=t&&t.message?t.message:void 0},M=function(t,e){var n,r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"checkout";if(null==t||null===(n=t.message)||void 0===n||null===(r=n.toLowerCase())||void 0===r||!r.match(/detected popup close|window is closed/)){var a=x(t),i="woocommerce-NoticeGroup",l=c()(e);"checkout"==o&&(i+=" woocommerce-NoticeGroup-checkout"),a='<div class="'+i+'"><ul class="woocommerce-error"><li>'+a+"</li></ul></div>",c()(".woocommerce-NoticeGroup-checkout, .woocommerce-error, .woocommerce-message").remove(),l.prepend(a),c().scroll_to_notices?c().scroll_to_notices(l):c()("html, body").animate({scrollTop:l.offset().top-100},1e3)}},R=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o="undefined"==typeof wc_address_i18n_params?_("i18n"):wc_address_i18n_params;if((0,a.isEmpty)(t))return!1;if(P||(P=JSON.parse(o.locale.replace(/&quot;/g,'"'))),!t.country||(0,a.isEmpty)(t))return!1;var i=null!==(e=P)&&void 0!==e&&e[t.country]?P[t.country]:P.default;i=c().extend(!0,{},P.default,i);var l=Object.entries(i).filter((function(t){var e=r(t,2),o=e[0];return e[1],!n.includes(o)}));for(var u in i=Object.fromEntries(l)){var s;if(null!==(s=i[u])&&void 0!==s&&s.required){var d=(null==t?void 0:t[u])||null;if(!d||null==d||!d.trim())return!1}}return!0},q=function(t){var e={};for(var n in t)if(null!=j&&j[n])if(j[n].includes("|")){var o=r(j[n].split("|"),2),a=o[0];o[1],e[a]=t[n]}else e[j[n]]=t[n];return e},D=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={};n=e?E:Object.fromEntries(Object.entries(j).map((function(t){var e=r(t,2),n=e[0];return[e[1],n]})));var o={};for(var a in n)if(a.includes("|")){var i,c=a.split("|"),l=v(c);try{for(l.s();!(i=l.n()).done;){var u=i.value;if(t.hasOwnProperty(u)){o[n[a]]=t[u];break}o[n[a]]=""}}catch(t){l.e(t)}finally{l.f()}}else t.hasOwnProperty(a)?o[n[a]]=t[a]:o[n[a]]="";return o},N=function(t){var e;return!!(t=null===(e=t)||void 0===e?void 0:e.trim())},H=function(t){var e=t.match(O);return e?o({},e[1],e[2]):null},L=function(t){return[(t=t.trim()).split(" ").slice(0,-1).join(" "),t.split(" ").pop()]},G=function(t){var e,n,r;return(null===(e=_("generalData"))||void 0===e||null===(n=e.restRoutes)||void 0===n||null===(r=n[t])||void 0===r?void 0:r.url)||null},U=function(t){var e,n;return t=t.replace(/^\//,""),null===(e=_("generalData"))||void 0===e||null===(n=e.ajaxRestPath)||void 0===n?void 0:n.replace("%s",t)},V=function(){return _("generalData").page},B=function(){var t,e;return(null===(t=_("generalData"))||void 0===t||null===(e=t.clientId)||void 0===e?void 0:e.length)>0};(this.wcPPCP=this.wcPPCP||{}).utils=e})();
//# sourceMappingURL=utils.js.map